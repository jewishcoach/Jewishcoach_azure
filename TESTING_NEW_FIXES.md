# 🧪 מדריך בדיקת התיקונים החדשים

## סטטוס: ✅ Deployed to Production
**Commit:** `24fd454` - fix: improve BSD stage transition logic and S6 entry  
**Deployed:** 2026-02-08, 14:05

---

## 🎯 מה תוקן?

### 1. **חסימה מוחלטת של S2→S4** 🚫
המערכת כעת **חוסמת** כל ניסיון לדלג מ-S2 (אירוע) ישירות ל-S4 (מחשבות).

**איך לבדוק:**
- התחל שיחה חדשה
- עבור דרך S1 (נושא) ל-S2 (אירוע)
- תאר אירוע במשפטים קצרים
- **צפוי:** המאמן **לא יקפוץ** ישירות לשאול "מה עבר לך בראש?" (S4)
- **צפוי:** המאמן **ישאל קודם** "מה הרגשת?" (S3)
- **אם ה-LLM ינסה לדלג:** המערכת תחזיר אוטומטית: *"רגע, לפני שנדבר על מחשבות - ספר לי קודם מה הרגשת באותו רגע?"*

---

### 2. **שאלות גנריות ב-S2** 🎯
השאלות עכשיו מתחילות **גנריות** ורק אז מתמקדות בדיאלוג (אם רלוונטי).

**איך לבדוק:**
- תאר אירוע **פנימי** (ללא שיחה ברורה עם מישהו)
  - דוגמה: "אחותי ישבה וחסמה את כל הבית עם הלימודים שלה"
- **השאלה הראשונה צריכה להיות:**
  - ✅ "מה עוד קרה באותו רגע? ספר לי יותר פרטים."
  - ✅ "איך זה התפתח? מה קרה אחרי זה?"
  - ✅ "מי עוד היה שם? איך הם הגיבו?"
- **לא צריכה להיות:**
  - ❌ "מה **בדיוק** נאמר שם? מה המילים שנאמרו?"

**רק אחרי 2-3 תורות**, אם יש הקשר של דיאלוג, אז השאלה "מה בדיוק נאמר?" תופיע.

---

### 3. **מעבר ישיר ל-S6** 🚀
במקום סיכום ארוך, המאמן כעת **שואל ישר** על שם הפער.

**איך לבדוק:**
- עבור את כל השלבים עד S5 (מעשה + רצוי)
- אחרי שהמאמן מסכם את המצוי והרצוי
- **צפוי במעבר ל-S6:**
  - ✅ "איך תקרא לפער הזה בין מה שעשית למה שרצית לעשות?"
  - ✅ "תן שם לפער הזה - איך היית קורא לו?"
- **לא צפוי:**
  - ❌ סיכום של 5-8 משפטים לפני השאלה

---

## 📝 תסריטי בדיקה מומלצים

### תסריט 1: בדיקת S2→S3 (חסימת דילוג)
```
👤: כן
🤖: מעולה! על מה תרצה להתאמן היום?

👤: על היכולת שלי לשמור על הבת מלך שאני
🤖: [S1 questions...]

👤: [מגיע ל-S2 עם אירוע פשוט]
👤: אתמול הבת שלי ענתה לבעלי בצורה מזלזלת ואני נכנסתי איתה למאבק כוח
🤖: [בודק: שאלה גנרית על האירוע, לא "מה נאמר?"]

👤: [מתאר עוד קצת]
👤: הרגשתי כעס
🤖: [צריך לעבור ל-S3, לא ל-S4!]
     [אם ה-LLM ינסה ל-S4, המערכת תחסום ותאלץ S3]
```

### תסריט 2: בדיקת שאלות S2 גנריות
```
👤: [מגיע ל-S2]
👤: אחותי ישבה אצלי כל השבת וחסמה את הבית עם הלימודים שלה
🤖: [בודק: השאלה היא "מה עוד קרה?" / "איך זה התפתח?" / "מי עוד היה שם?"]
     [לא "מה בדיוק נאמר שם?"]
```

### תסריט 3: בדיקת מעבר S5→S6
```
👤: [מגיע ל-S5 ומאשר את הסיכום]
👤: נכון
🤖: [בודק: שואל ישר "איך תקרא לפער הזה?" במקום לתת סיכום ארוך נוסף]
```

---

## 🔍 מה לחפש (Red Flags)

### ❌ Bug 1: דילוג על S3
- אם המאמן קופץ מ"ספר לי על האירוע" (S2) ישירות ל"מה עבר לך בראש?" (S4)
- **Expected:** חסימה אוטומטית וכפייה לשאול על רגשות (S3)

### ❌ Bug 2: "מה נאמר?" באירוע פנימי
- אם המאמן שואל "מה בדיוק נאמר שם?" כשאלה **ראשונה** ב-S2
- במקרים שבהם האירוע לא כולל דיאלוג ברור
- **Expected:** שאלה גנרית יותר קודם

### ❌ Bug 3: סיכום ארוך לפני S6
- אם המאמן נותן סיכום של הכל ("באותו רגע... הרגשת... חשבת... עשית...") 
- ואז שואל "האם נכון?" 
- ו**רק אז** שואל על הפער
- **Expected:** סיכום קצר + ישר לשאלה "איך תקרא לפער?"

---

## ✅ איך לדווח תוצאות

אם מצאת bug:
1. **העתק את השיחה** (copy-paste)
2. **סמן איפה הבעיה** (הדגש במקום הרלוונטי)
3. **הסבר מה היה צריך לקרות**
4. שלח לי את זה

דוגמה:
```
מאמן: תודה על השיתוף. עכשיו אני רוצה להתעמק ברגשות שהיו לך באותו רגע. מה הרגשת?
אני: כעס, תסכול
מאמן: מה עבר לך בראש באותו רגע?  ← ❌ BUG! דילג על חקירת רגשות!
                                          (צריך היה לחקור כל רגש לפני מעבר ל-S4)
```

---

## 🎯 מטרת הבדיקה

לוודא ש:
1. ✅ אי אפשר לדלג על S3 (רגשות)
2. ✅ השאלות ב-S2 התחלתיות הן גנריות
3. ✅ המעבר ל-S6 הוא ישיר ולא דרך סיכום ארוך

**אם כל 3 עובדים → התיקונים הצליחו! 🎉**
